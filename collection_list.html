<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>맛집 검색</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&family=Inter:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <style>
        html,
        body {
            height: 100%;
            margin: 0;
        }

        body {
            font-family: 'Noto Sans KR', 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* 팝업메뉴 트랜지션 스타일 */
        .popup-hidden {
            opacity: 0;
            transform: scale(0.95) translateY(-10px);
            transition: all 0.15s ease-out;
            pointer-events: none;
        }

        .popup-visible {
            opacity: 1;
            transform: scale(1) translateY(0);
            transition: all 0.15s ease-in;
            pointer-events: auto;
        }

        /* (기타 스타일은 유지) */
        .sheet-visible {
            transform: translateY(0);
        }
    </style>
</head>

<body class="bg-gray-50">

    <div class="h-full flex flex-col">

        <!-- Header: 뒤로가기 버튼 a 태그로 변경 -->
        <header class="grid grid-cols-3 items-center p-4 border-b border-gray-200 flex-shrink-0 bg-white">
            <!-- 1. 뒤로가기 버튼 (왼쪽) -->
            <div class="justify-self-start">
                <!-- <button>에서 <a> 태그로 변경하고 href 추가 -->
                <a href="scrap.index.html" id="header-back-button" class="p-1 block rounded-full text-gray-600 hover:bg-gray-100 focus:outline-none">
                    <!-- 뒤로가기 (chevron-left) 아이콘 SVG -->
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5 8.25 12l7.5-7.5" />
                    </svg>
                </a>
            </div>
            
            <!-- 2. 제목 (중앙) -->
            <h1 class="text-xl font-bold text-center text-gray-800">스크랩</h1>
            
            <!-- 3. 옵션 버튼 (오른쪽) -->
            <div class="justify-self-end relative">
                <!-- ... 버튼 -->
                <button id="header-options-button"
                    class="p-1 rounded-full text-gray-600 hover:bg-gray-100 focus:outline-none">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z" />
                    </svg>
                </button>

                <!-- ... 버튼 클릭 시 나타날 팝업 메뉴 -->
                <div id="options-popup" class="popup-hidden absolute right-0 mt-2 w-40 bg-white rounded-lg shadow-xl z-10 border border-gray-100 overflow-hidden">
                    <button id="delete-collection-button" class="block w-full text-left px-4 py-3 text-sm font-medium text-red-600 hover:bg-red-50 focus:outline-none">
                        컬렉션 삭제
                    </button>
                </div>
            </div>
        </header>

        <!-- (메인 컨텐츠 영역은 여기에 이어집니다) -->
        
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        
        // --- 1. URL에서 꼬리표(파라미터) 읽기 ---
        const urlParams = new URLSearchParams(window.location.search);
        const collectionId = urlParams.get('id'); // 'all', '1' 등
        const collectionName = urlParams.get('name'); // '모든 스크랩', '가고싶은 곳' 등

        // --- 2. 헤더 제목 요소 찾기 ---
        const headerTitle = document.querySelector('header h1');

        // --- 3. URL에서 읽어온 이름으로 헤더 제목 변경 ---
        if (collectionName) {
            // URL에서 읽은 값이 있으면 그걸로 제목 설정
            headerTitle.textContent = collectionName;
        } else {
            // URL에 꼬리표가 없으면 기본값 설정
            headerTitle.textContent = '컬렉션';
        }

        // --- 4. UI 요소들 찾기 ---
        const optionsButton = document.getElementById('header-options-button');
        const optionsPopup = document.getElementById('options-popup');
        const deleteButton = document.getElementById('delete-collection-button');

        // --- 5. "모든 스크랩"일 경우 '...' 버튼 숨기기 (삭제 못하게) ---
        if (collectionId === 'all') {
            if (optionsButton) {
                optionsButton.style.display = 'none'; // '...' 버튼 숨김
            }
            // "모든 스크랩"일 때는 아래 이벤트 리스너를 연결할 필요가 없으므로
            // 여기서 함수 실행을 멈춥니다. (이게 오류를 막는 핵심입니다!)
            return; 
        }

        // --- 6. (id=all이 아닐 경우) '...' 버튼 클릭 시 팝업 토글 ---
        optionsButton.addEventListener('click', (event) => {
            event.stopPropagation(); 
            optionsPopup.classList.toggle('popup-hidden');
            optionsPopup.classList.toggle('popup-visible');
        });

        // 팝업 외부 클릭 시 팝업 닫기
        window.addEventListener('click', () => {
            if (optionsPopup.classList.contains('popup-visible')) {
                optionsPopup.classList.remove('popup-visible');
                optionsPopup.classList.add('popup-hidden');
            }
        });

        // 팝업 내부 클릭 시 닫히지 않도록
        optionsPopup.addEventListener('click', (event) => {
             event.stopPropagation();
        });

        // '컬렉션 삭제' 버튼 클릭 이벤트
        deleteButton.addEventListener('click', () => {
            console.log(`'${collectionName}' (ID: ${collectionId}) 컬렉션 삭제 버튼 클릭됨`);
            
            // TODO: 여기에 collectionId를 사용한 실제 삭제 API 호출
            
            // 팝업 닫기
            optionsPopup.classList.remove('popup-visible');
            optionsPopup.classList.add('popup-hidden');
        });
    });
</script>

</body>

</html>